{% extends 'mypage/web/base.html' %}
{% load static %}
{% block static %}
        <link rel="stylesheet" href="{% static 'member/web/css/my-teenchin-web.css' %}">
{% endblock %}

{% block title %}틴플:: 틴친 목록{% endblock %}
{% block content %}
        <!-- 메인 부분 -->
        <main class="mypage-main">
            <div class="mypage-wrap">
                <div>
                    <div class="mypage-container">
                        <div class="mypage-box">
                            <div class="side-bar">
                                <div class="side-bar-title">마이페이지</div>
                                <div class="side-bar-items">
                                    <div>
                                        <!-- 주소 필요 -->
                                        <a href="/member/mypage-wishlist/">나의 위시리스트</a>
                                    </div>
                                    <div>
                                        <!-- 주소 필요 -->
                                        <a href="/member/mypage-my-club/">나의 모임</a>
                                    </div>
                                    <div>
                                        <!-- 주소 필요 -->
                                        <a href="/member/mypage-reply/">나의 댓글</a>
                                    </div>
                                    <div>
                                        <!-- 주소 필요 -->
                                        <a href="/member/mypage-activity/">나의 활동</a>
                                    </div>
                                    <div>
                                        <!-- 주소 필요 -->
                                        <a class="target-color" href="">틴친 목록</a>
                                    </div>
                                    <div>
                                        <!-- 주소 필요 -->
                                        <a href="/member/mypage-payment/">결제 내역</a>
                                    </div>
                                    <div>
                                        <!-- 주소 필요 -->
                                        <a href="/member/mypage-letter/">쪽지 목록</a>
                                    </div>
                                    <div>
                                        <!-- 주소 필요 -->
                                        <a href="/member/mypage-alram/">알림 목록</a>
                                    </div>
                                    <div>
                                        <!-- 주소 필요 -->
                                        <a href="/member/mypage-info/">내 정보 수정</a>
                                    </div>
                                </div>
                            </div>
                            <div class="contents">
                                <div class="service-title-box">
                                    <div class="service-title">틴친 목록</div>
                                    <div class="tab-list-box">
                                        <div>
                                            <input class="teenchin-search-input" type="text" name="text_insert" id="text_insert" autocomplete="off" placeholder="이름,이메일" />
                                        </div>
                                        <div class="tab-list-contents">
                                            <div>
                                                <button class="tab-list-btn" type="button">
                                                    <span>전체</span>
                                                    <span> ↓ </span>
                                                </button>
                                            </div>
                                            <div class="tab-list">
                                                <a class="tab" name="">전체</a>
                                                <a class="tab" name="case-a/">틴친중</a>
                                                <a class="tab" name="case-b/">신청중</a>
                                                <a class="tab" name="case-c/">수락대기</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="teenchin-list">
                                    <div id="loadingSpinner">
                                      <img class="maskaaa" src='https://i.ibb.co/20zw80q/1487.gif'>
                                    </div>
                                </div>
                                <button class="teenchin-more-btn" type="button">더보기
                                    <div class="more-text-box">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="down-arrow-svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7">더보기</path>
                                        </svg>
                                    </div>
                                </button>
                                <div class="service-title-box">
                                    <div class="service-title">틴친 추천</div>
                                </div>
                                {#                                테스트#}
                                <div class="a">
                                    <div class="teenchin-list-add">
                                    </div>
                                </div>
                                    {#                                테스트#}

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <!-- 푸터 부분 -->
        <footer></footer>
        <!-- 모달 모아놓은 부분 -->
        <div>
            <!-- 쪽지 작성 모달 -->
            <div class="send-modal-wrap">
                <div class="send-modal-shadow"></div>
                <div class="send-modal-container">
                    <div class="send-modal-box">
                        <div>
                            <h2 class="modal-header-box">
                                <div class="send-modal-title">쪽지 보내기</div>
                            </h2>
                        </div>
                        <div class="sender-receiver-box">
                            <div class="sender-box">
                                <div class="sender-title">보낸 사람</div>
                                <!-- 회원의 이름과 이메일이 필요 -->
                                <div class="send-sender-email" type="text">{{ request.session.member.member_nickname }}({{ request.session.member.member_email }})</div>
                            </div>
                            <div class="receiver-box">
                                <div class="receiver-title">받는 사람</div>
                                <!-- 형식: 아무개(example@sample.com) -->
                                <input class="send-receiver-email" autocomplete="off" type="text" placeholder="example@sample.com" readonly/>
                            </div>
                        </div>
                        <div class="letter-content-area">
                            <!-- 쪽지 내용 필요 -->
                            <textarea id="send-content" name="send-content" rows="10" placeholder="쪽지의 내용을 작성해 주세요."></textarea>
                        </div>
                        <div class="modal-btn-box">
                            <button class="send-close-btn" type="button">닫기</button>
                            <button class="send-check-btn" type="button" disabled>보내기</button>
                        </div>
                    </div>
                </div>
                <div class="check-modal-container" style="display: none">
                    <div class="check-modal-box">
                        <div>
                            <h2 class="modal-header-box">
                                <div class="send-check-svg-box">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="send-check-svg" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                                <div class="modal-header-title">쪽지가 전송 되었습니다.</div>
                            </h2>
                        </div>
                        <div class="check-modal-btn-box">
                            <button class="check-btn" type="button">확인</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 틴친 상태 변경 메시지 모달 -->
            <div class="teenchin-modal-wrap">
                <div class="teenchin-modal-shadow"></div>
                <div class="teenchin-modal-container">
                    <div class="teenchin-modal-box">
                        <div>
                            <h2 class="modal-header-box">
                                <div class="teenchin-modal-title"></div>
                            </h2>
                        </div>
                        <div class="teenchin-modal-btn-box">
                            <button class="teenchin-modal-cancle-btn" type="button">닫기</button>
                            <button class="teenchin-modal-changed-btn" type="button"></button>
                        </div>
                    </div>
                </div>
                <!-- teenchin-modal-btn 클릭 시 나오는 모달 -->
                <div class="teenchin-check-modal-container" style="display: none">
                    <div class="teenchin-check-modal-box">
                        <div>
                            <h2 class="modal-header-box">
                                <div class="teenchin-check-svg-box">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="teenchin-check-svg" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                                <div class="modal-header-title"></div>
                            </h2>
                        </div>
                        <div class="teenchin-check-modal-btn-box">
                            <button class="check-btn" type="button">확인</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
    
    
{% endblock %}

{% block js %}
    <script>
    const csrf_Token = '{{ csrf_token }}';
    const member_id = '{{ request.session.member.id }}'

    const selectbut = document.querySelectorAll(".tab")
    let status_teenchin = '전체'
    selectbut.forEach((btn)=>{
        btn.addEventListener("click", async(e)=>{
            status_teenchin = btn.name
            page = 1
            const text = await teenchinService.getList(member_id, page,status_teenchin,search, showList);
            teenchinshow.innerHTML = text;
            });
    })

    let search = '';
    const textInsert = document.getElementById("text_insert");
    textInsert.addEventListener("keyup", async (e) => {
        if (e.keyCode  === 13 && textInsert.value !== '') {
            search = textInsert.value;  // 수정: 변수에 입력된 텍스트 할당
            textInsert.value = ''
            const text = await teenchinService.getList(member_id, page,status_teenchin,search, showList);
            teenchinshow.innerHTML = text;

        }
    });
    

    </script>
    <script src="{% static 'member/web/js/my-teenchin-module-web.js' %}"></script>
    <script src="{% static 'member/web/js/my-teenchin-web.js' %}"></script>
    <script src="{% static 'member/web/js/my-teenchin-web-scroll.js' %}"></script>
{% endblock %}